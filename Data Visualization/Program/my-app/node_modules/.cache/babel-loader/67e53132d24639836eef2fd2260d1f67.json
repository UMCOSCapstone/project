{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport uuid from 'uuid/v4';\nimport { isFunction } from 'lodash-es';\nimport { isEqual } from 'lodash-es';\nimport { attempt } from 'lodash-es';\nimport isImmutable from 'is-immutable';\nimport immutableEqual from 'immutable-is';\nimport { Provider } from '../SeriesContext';\nimport addEventProps, { getNonEventHandlerProps } from '../../utils/events';\nimport getModifiedProps from '../../utils/getModifiedProps';\nimport { logSeriesErrorMessage } from '../../utils/warnings';\n\nvar Series =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Series, _Component);\n\n  function Series(props) {\n    var _this;\n\n    _classCallCheck(this, Series);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Series).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getSeriesConfig\", function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          data = _this$props.data,\n          requiresAxis = _this$props.requiresAxis,\n          getAxis = _this$props.getAxis,\n          children = _this$props.children,\n          rest = _objectWithoutProperties(_this$props, [\"id\", \"data\", \"requiresAxis\", \"getAxis\", \"children\"]);\n\n      var seriesId = isFunction(id) ? id() : id;\n      var seriesData = isImmutable(data) ? data.toJS() : data;\n      var nonEventProps = getNonEventHandlerProps(rest);\n\n      var config = _objectSpread({\n        id: seriesId,\n        data: seriesData\n      }, nonEventProps);\n\n      if (requiresAxis) {\n        var axis = getAxis();\n        config[axis.type] = axis.id;\n      }\n\n      return config;\n    });\n\n    if (process.env.NODE_ENV === 'development') {\n      var type = props.type,\n          getHighcharts = props.getHighcharts;\n      var seriesTypes = Object.keys(getHighcharts().seriesTypes);\n      if (seriesTypes.indexOf(type) === -1) logSeriesErrorMessage(type);\n    }\n\n    return _this;\n  }\n\n  _createClass(Series, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var chart = this.props.getChart(); // Create Highcharts Series\n\n      var opts = this.getSeriesConfig();\n      this.series = chart.addSeries(opts, true);\n      var update = this.series.update.bind(this.series);\n      addEventProps(update, this.props); // Re-render to pass this.series to Provider\n\n      this.forceUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props2 = this.props,\n          visible = _this$props2.visible,\n          data = _this$props2.data,\n          rest = _objectWithoutProperties(_this$props2, [\"visible\", \"data\"]); // Using setData is more performant than update\n\n\n      if (isImmutable(data) && immutableEqual(data, prevProps.data) === false) {\n        this.series.setData(data.toJS(), true);\n      } else if (isEqual(data, prevProps.data) === false) {\n        this.series.setData(data, true);\n      }\n\n      if (visible !== prevProps.visible) {\n        this.series.setVisible(visible);\n      }\n\n      var modifiedProps = getModifiedProps(prevProps, rest);\n\n      if (modifiedProps !== false) {\n        this.series.update(modifiedProps);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.series && this.series.remove) {\n        // Series may have already been removed, i.e. when Axis unmounted\n        attempt(this.series.remove.bind(this.series));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.series) return null;\n      return React.createElement(Provider, {\n        value: this.series\n      }, this.props.children);\n    }\n  }]);\n\n  return Series;\n}(Component);\n\n_defineProperty(Series, \"defaultProps\", {\n  type: 'line',\n  id: uuid,\n  children: null,\n  data: [],\n  requiresAxis: true,\n  visible: true\n});\n\nexport default Series;","map":null,"metadata":{},"sourceType":"module"}